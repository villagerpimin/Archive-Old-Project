{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?3768","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?e9e3","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?c0d6","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?c386","uni-app:///pages/readnews/readnews.vue","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?4926","webpack:///C:/Users/86188/OneDrive - alumni.albany.edu/桌面/uniapp/简约新闻/pages/readnews/readnews.vue?b11a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,qG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AAC6L;AAC7L,gBAAgB,2LAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gNAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAuuB,CAAgB,wrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiC3vB;AACA,MADA,kBACA;AACA;AACA,uBADA;AAEA,eAFA,EAEA;AACA;AACA,mDADA;AAEA,uBAFA;AAGA,iCAHA;AAIA,uBAJA;AAKA,0BALA,EAHA;AASA;AACA,sBAVA,CAUA,WAVA;;AAYA,GAdA;AAeA,QAfA,kBAeA,CAfA,EAeA;AACA;AACA;AACA;AACA,4BAJA,CAIA;AACA,GApBA;AAqBA;AACA,eADA,yBACA;AACA;AACA;AACA,oDADA;AAEA,qBAFA;AAGA,qBAHA;AAIA,eAJA,mBAIA,GAJA,EAIA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA,YAVA,kBAUA;AACA;AACA,SAZA;;AAcA,KAjBA;AAkBA,WAlBA,mBAkBA,GAlBA,EAkBA;AACA;AACA;AACA;AACA;AACA;AACA,+DADA;AAEA,8BAFA;AAGA,wBAHA;AAIA;AACA,+DADA,EAJA;;AAOA,0BAPA;AAQA,iBARA,mBAQA,GARA,EAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA,WAlBA;AAmBA,cAnBA,kBAmBA;AACA;AACA,WArBA;;AAuBA;AACA,KA/CA;AAgDA,eAhDA,uBAgDA,GAhDA,EAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAVA,CAUA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,qBAFA;;AAIA,KAnEA,EArBA,E;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAo1C,CAAgB,0rCAAG,EAAC,C;;;;;;;;;;;ACAx2C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/readnews/readnews.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/readnews/readnews.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./readnews.vue?vue&type=template&id=4c4966b4&\"\nvar renderjs\nimport script from \"./readnews.vue?vue&type=script&lang=js&\"\nexport * from \"./readnews.vue?vue&type=script&lang=js&\"\nimport style0 from \"./readnews.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/readnews/readnews.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./readnews.vue?vue&type=template&id=4c4966b4&\"","var components\ntry {\n  components = {\n    newsComment: function() {\n      return import(\n        /* webpackChunkName: \"components/news-comment/news-comment\" */ \"@/components/news-comment/news-comment.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./readnews.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./readnews.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- 这个页面用于展示完整新闻 -->\r\n\t\t<view class=\"headpic\" v-if=\"newsInf.img==null?false:true\">\r\n\t\t\t<!-- 头图 -->\r\n\t\t\t<image :src=\"newsInf.img\"></image>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"frame\">\r\n\t\t\t<view class=\"tit\">\r\n\t\t\t\t<!-- 标题 -->\r\n\t\t\t\t<view class=\"big\">{{newsInf.title}}</view>\r\n\t\t\t\t<!-- 副标题 -->\r\n\t\t\t\t<view class=\"lit\">\r\n\t\t\t\t\t发布日期：{{newsInf.date}} &nbsp;&nbsp;&nbsp;&nbsp; \r\n\t\t\t\t\t来源：{{newsInf.author}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"content\" v-for=\"text in splitContent\">\r\n\t\t\t\t<!-- 正文 -->\r\n\t\t\t\t<text selectable=\"true\">{{text}}\\n\\n</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 评论区 -->\r\n\t\t<news-comment v-if=\"hasNetwork\" :nid=\"newsId\"></news-comment>\r\n\t\t\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\thasNetwork:false,\n\t\t\t\tnewsId:0, /* 新闻id */\r\n\t\t\t\tnewsInf:{\r\n\t\t\t\t\timg:\"/static/images/banner/fly_banner.jpg\",\r\n\t\t\t\t\ttitle:\"示例新闻标题\",\r\n\t\t\t\t\tcontent:\"当前处于离线状态\\ntest\",\r\n\t\t\t\t\tauthor:\"admin\",\r\n\t\t\t\t\tdate:\"20xx-xx-xx\"\r\n\t\t\t\t}, /* 新闻信息 */\r\n\t\t\t\tsplitContent:[],   /* 将正文拆开 */\n\t\t\t};\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.newsId=e.nid\r\n\t\t\tconsole.log(\"获得的新闻id：\"+this.newsId)\r\n\t\t\tthis.testNetwork()\r\n\t\t\tthis.saveHistory(e.nid)  //存储浏览记录\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\ttestNetwork(){\r\n\t\t\t\tvar that=this\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:\"http://localhost:782/uni/api/test.php\",\r\n\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\ttimeout:1500,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"阅读页同步成功！\")\r\n\t\t\t\t\t\tthat.hasNetwork=true\r\n\t\t\t\t\t\t/* 连接成功后获取新闻内容 */\r\n\t\t\t\t\t\tthat.getNews(that.newsId)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log(\"阅读页处于离线！\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetNews(nid){\r\n\t\t\t\t/* 在连接成功的情况下获得新闻内容 */\r\n\t\t\t\tvar that=this\r\n\t\t\t\tconsole.log(this.hasNetwork)\r\n\t\t\t\tif(this.hasNetwork){\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:getApp().globalData.dataURL+\"/api/getNews.php\",\r\n\t\t\t\t\t\tdata:{\"nid\":nid},\r\n\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t'content-type':'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdataType:\"json\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t/* 获得成功后将数据展示 */\r\n\t\t\t\t\t\t\tthat.newsInf=res.data\r\n\t\t\t\t\t\t\tthat.splitContent=res.data.content.split(\"\\n\")\r\n\t\t\t\t\t\t\t/* 过滤空值 */\r\n\t\t\t\t\t\t\tthat.splitContent=that.splitContent.filter(function(s){\r\n\t\t\t\t\t\t\t\treturn s&&s.trim()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t\t//console.log(that.splitContent)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t/* 失败后的操作 */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveHistory(nid){\r\n\t\t\t\t/* 用于记录浏览历史 */\r\n\t\t\t\tvar history=[]\r\n\t\t\t\t//uni.removeStorageSync(\"viewHistory\")\r\n\t\t\t\tvar cache=uni.getStorageSync(\"viewHistory\")\r\n\t\t\t\tfor(var i=0;i<cache.length;i++){\r\n\t\t\t\t\thistory.push(cache[i])\r\n\t\t\t\t}\r\n\t\t\t\t/* 将已有的数据放入数组 */\r\n\t\t\t\thistory.unshift(nid)\r\n\t\t\t\thistory.splice(15)  //只保留15个数据\r\n\t\t\t\t//将元素去重\r\n\t\t\t\thistory=Array.from(new Set(history))\r\n\t\t\t\tconsole.log(history)\r\n\t\t\t\t//将数据存到本地\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey:\"viewHistory\",\r\n\t\t\t\t\tdata:history\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\r\n\t.frame{\r\n\t\twidth: 95%;\r\n\t\tmargin: auto;\r\n\t\tposition: relative;\r\n\t\ttop: 15rpx;\r\n\t\tbottom: 30rpx;\r\n\t\tborder-bottom: 1rpx solid rgba($color: #8e8e8e, $alpha: 0.3);\r\n\t}\n.headpic{\r\n\twidth: 100%;\r\n\theight: 330rpx;\r\n\t/* background-color: #007AFF; */\r\n\tmargin-bottom: 30rpx;\r\n\timage{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n}\r\n.tit{\r\n\twidth: 100%;\r\n\theight: 240rpx;\r\n\tposition: relative;\r\n\ttop: 40rpx;\r\n\t.big{\r\n\t\t/* 大标题 */\r\n\t\tfont-weight: 700;\r\n\t\tfont-size: 36rpx;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t\theight: 120rpx;\r\n\t}\r\n\t.lit{\r\n\t\t/* 小标题 */\r\n\t\twidth: 90%;\r\n\t\theight: 40rpx;\r\n\t\tcolor: #898989;\r\n\t\tfont-size: 24rpx;\r\n\t\tmargin: auto;\r\n\t}\r\n}\r\n.content{\r\n\twidth: 90%;\r\n\ttext-indent: 45rpx;\r\n\tmargin: auto;\r\n}\n</style>\n","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./readnews.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./readnews.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1636642013897\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}